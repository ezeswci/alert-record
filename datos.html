<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Mi Alerta</title>
    <script src="cordova.js" type="text/javascript"></script>
    <script src="js/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="js/datos.js" type="text/javascript"></script>
    <script src="js/panico.js" type="text/javascript"></script>
    <script src="js/gps.js" type="text/javascript"></script>
	<script src="js/recordAudio.js" type="text/javascript"></script>
    <script src="js/enviar_mensajes.js" type="text/javascript"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="css/estilos.css" rel="stylesheet" type="text/css" />

</head>

<body>


<script>
function startAudioRec() {
  var src = "rec.amr";
  audioRec = new Media(src, recordOnSuccess, recordOnError);
  audioRec.startRecord();
  circleBlink();
  console.log("test");

}
function recordOnError() {}
function recordOnSuccess() {}

var visible = true;
var recInterval;

function circleBlink() {
  recInterval = setInterval(blink, 1000);
  function blink() {
    var circle = document.getElementById('recCircle');
    if (visible) {
      circle.setAttribute("style", "visibility: hidden;");
      visible = false;
    } else {
      circle.setAttribute("style", "visibility: visible;");
      visible = true;
    }
  }
}
function stopAudioRec() {
  audioRec.stopRecord();
  clearInterval(recInterval);
  document.getElementById("recCircle").setAttribute("style", "visibility: hidden;");
  audioRec.release();
}
</script>
<button onclick="startAudioRec()">Start</button>
<button onclick="stopAudioRec()">Stop</button>
</body>
</html>
